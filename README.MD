# –í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å –æ—Ç–ª–∏—á–∏–π (gendiff)

**gendiff** ‚Äî CLI-—É—Ç–∏–ª–∏—Ç–∞ –∏ Python-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö JSON –∏ YAML. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤—ã–≤–æ–¥–∞: `stylish`, `plain`, `json`.

---

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
uv init

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
uv pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
uv run gendiff file1.json file2.json
uv run python -m gendiff.scripts.gendiff file1.json file2.json

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
uv pip install .
gendiff file1.json file2.json
```

---

## üõ† –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–ø—Ä–∞–≤–∫–∞
```bash
gendiff -h
usage: gendiff [-h] [-f FORMAT] first_file second_file

Compares two configuration files and shows a difference.

optional arguments:
  -h, --help            show this help message and exit
  -f FORMAT, --format FORMAT   set format of output
```

### Stylish (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```diff
gendiff file1.json file2.json
{
  - follow: false
    host: hexlet.io
  - proxy: 123.234.53.22
  - timeout: 50
  + timeout: 20
  + verbose: true
}
```

### Plain
```text
gendiff --format plain file1.json file2.json
Property 'common.follow' was added with value: false
Property 'common.setting2' was removed
Property 'common.setting3' was updated. From true to null
...
```

### JSON
```bash
gendiff --format json file1.json file2.json
```
```json
[
  {
    "key": "timeout",
    "status": "updated",
    "old_value": 50,
    "new_value": 20
  },
  ...
]
```

---

## üì¶ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```python
from gendiff import generate_diff

result = generate_diff("file1.json", "file2.json", format_name="plain")
print(result)
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ CI

- –¢–µ—Å—Ç—ã: `pytest`
- –õ–∏–Ω—Ç–µ—Ä: `make lint`
- GitHub Actions: —Ç–µ—Å—Ç—ã + –ª–∏–Ω—Ç
- –ü–æ–∫—Ä—ã—Ç–∏–µ: –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ CodeClimate
- –í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ: `tests/test_data/`

```bash
make test
make lint
```

---

## üìÇ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

| –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ |
|------------------------|-----------|
| JSON                   | ‚úÖ        |
| YAML (.yml/.yaml)      | ‚úÖ        |

| –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞  | –û–ø–∏—Å–∞–Ω–∏–µ                            |
|----------------|-------------------------------------|
| `stylish`      | –ò–µ—Ä–∞—Ä—Ö–∏—á–Ω—ã–π —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏ –∏ —Å–∏–º–≤–æ–ª–∞–º–∏ |
| `plain`        | –ß–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π     |
| `json`         | –ú–∞—à–∏–Ω–æ—á–∏—Ç–∞–µ–º—ã–π JSON-—Ñ–æ—Ä–º–∞—Ç          |

---

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- `parser.py` ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞
- `generate_diff()` ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–µ—Ä–µ–≤–∞ —Ä–∞–∑–ª–∏—á–∏–π
- `formatters/` ‚Äî –º–æ–¥—É–ª—å —Å —Ç—Ä–µ–º—è —Ñ–æ—Ä–º–∞—Ç–µ—Ä–∞–º–∏: `stylish`, `plain`, `json`
- `scripts/gendiff` ‚Äî CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

## üìå TODO

- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TOML –∏ INI (–≤ –±—É–¥—É—â–µ–º)
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ç—á–µ–π
- [ ] –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
